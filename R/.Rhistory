help(read.csv)
athena.data = read.csv("../data/UA_AthenaData.csv", header = TRUE, sep = ",")
?boxplot
athena.data['CallCategory']
boxplot(athena.data['Total_N30Day_Calls'])
?par
par(nrow=2)
par(nrow='2')
par(mfrow=2)
par(mfrow=c(0,2))
par(mfrow=c(1,2))
boxplot(athena.data['Total_N30Day_Calls'])
boxplot(athena.data['Total_B30Day_Calls'])
?boxplot
boxplot(athena.data['Total_N30Day_Calls'], athena.data['Total_B30Day_Calls'], names=c('Total_N30Day_Calls', 'Total_B30Day_Calls'))
main("")
boxplot(athena.data['Total_N30Day_Calls'], main='Total_B30Day_Calls')
boxplot(athena.data['Total_N30Day_Calls'], main='Total_N30Day_Calls')
boxplot(athena.data['Total_N30Day_Calls'], main='Total_N30Day_Calls')
boxplot(athena.data['Total_B30Day_Calls'], main='Total_B30Day_Calls')
boxplot(athena.data['Total_NToday_Calls'], main='Total_NToday_Calls')
boxplot(athena.data['Total_BToday_Calls'], main='Total_BToday_Calls')
boxplot(athena.data['Total_NHour_Calls'], main='Total_NHour_Calls')
boxplot(athena.data['Total_BHour_Calls'], main='Total_BHour_Calls')
hist(athena.data['Total_BHour_Calls'], freq = F, main = "Total_BHour_Calls", breaks = 30)
typeof()
typeof(athena.data['Total_BHour_Calls'])
typeof(athena.data['Total_BHour_Calls'][0])
athena.data['Total_BHour_Calls'][0]
athena.data['Total_BHour_Calls']
athena.data['Total_BHour_Calls'][0]
hist(athena.data['Total_BHour_Calls'], freq = F, main = "Total_BHour_Calls", breaks = 30)
?boxplot
we=gsub(",", "", athena.data['Total_BHour_Calls'])
we=as.numeric(we)
hist(we, freq = F, main = "Total_BHour_Calls", breaks = 30)
delete we
rm we
rm(we)
x = as.numeric(athena.data['Total_BHour_Calls'])
density(athena.data['Total_BHour_Calls'])
plot(athena.data['Total_BHour_Calls'])
?boxplot
plot(athena.data['Total_BHour_Calls'])[1]
athena.data['Total_BHour_Calls'][1]
asdfsdf''
plot(athena.data['Total_BHour_Calls'])[0]
dim(athena.data['Total_BHour_Calls'])
hist(athena.data$Total_B30Day_Calls, breaks = 30, freq = F, main = "Total_B30Day_Calls")
hist(athena.data$Total_B30Day_Calls, breaks = 30, freq = T, main = "Total_B30Day_Calls")
hist(athena.data$Total_B30Day_Calls, breaks = 30, freq = F, main = "Total_B30Day_Calls1")
d = density(athena.data$Total_B30Day_Calls)
plot(d)
?mapply
?lapply
x= lapply(athena.data$Total_B30Day_Calls, ">1e3")
x= lapply(athena.data$Total_B30Day_Calls, ">")
x= lapply(athena.data$Total_B30Day_Calls, ">", 1e3)
x
func = function(x) { if(x < 1e3) { return(x)}}
x= lapply(athena.data$Total_B30Day_Calls, func)
x
rm(x)
func = function(x) { if(x < 1e3) { return(x)}}
x= lapply(athena.data$Total_B30Day_Calls, func)
boxplot(x)
warnings()
boxplot(athena.data$Total_B30Day_Calls)
func = function(x) { if(x < 1e3) { return(x)}}
x= lapply(athena.data$Total_B30Day_Calls, func)
hist(x, breaks = 30, freq = F, main = "Total_B30Day_Calls")
x
typeof(x)
x[0]
x[1]
x$1
typeof(athena.data)
x$a = lapply(athena.data$Total_B30Day_Calls, func)
hist(x$a, breaks = 30, freq = F, main = "Total_B30Day_Calls")
d = density(x$a)
plot(d)
as.numeric(x$a)
as.numeric(x[1])
func = function(x) { if(x < 1e3) { return(x)}}
x = lapply(athena.data$Total_B30Day_Calls, func)
rm(x)
func = function(x) { if(x < 1e3) { return(x)}}
x = lapply(athena.data$Total_B30Day_Calls, func)
x = x[lapply(x, as.numeric(x))]
lapply(x, as.numeric(x))
x = lapply(x, func1(x))
func1 = function(x) { return(as.numeric(x))}
x = lapply(x, func1(x))
?lapply
x = as.numeric(unlist(x))
x
hist(x, breaks = 30, freq = F, main = "Total_B30Day_Calls")
d=density(X)
plot(d)
hist(x, breaks = 30, freq = F, main = "Total_B30Day_Calls")
plot(lines(d))
d=density(x)
plot(d)
hist(x, breaks = 30, freq = F, main = "Total_B30Day_Calls")
d=density(x)
plot(d)
research.data = read.csv("../data/UA_ResearchData.csv", header=TRUE, sep = ",")
?split
x = c(1,2,3,4,5,6,7,8,9)
cut(x, b < 3)
as.factor(<3)
linetype = split(research.data, research.data$isLandline)
linetype
rm(linetype)
isLandline.data = split(research.data, research.data$isLandline)
isLandline.data$TRUE
isLandline.data$FALSE
dim(isLandline.data$FALSE)
rm(isLandline.data)
IsLandline.data = split(research.data, research.data$isLandline)
IsLandline.data$FALSE
IsLandline.data
IsLandline.data[0]
IsLandline.data[1]
IsLandline.data[2]
IsLandline.data$TRUE
research.data$isLandline
?split
research.data = read.csv("../data/UA_ResearchData.csv", header=TRUE, sep = ",")
isLandline.data = split(research.data, research.data$isLandline)
dim(isLandline.data$FALSE)
boxplot(isLandline.data$FALSE)
dim(research.data)
isLandline.data$TRUE
isLandline.data$FALSE
length(isLandline.data$FALSE)
?split.data.frame
isLandline.data = split.data.frame(research.data, research.data$isLandline)
isLandline.data$FALSE
rm(isLandline.data)
rm(IsLandline.data)
isLandline.data = split.data.frame(research.data, research.data$isLandline)
isLandline.data$FALSE
isLandline.data$TRUE
isLandline.data = split.default(research.data, research.data$isLandline)
col(research.data$isLandline)
isLandline.data = split(research.data, research.data$isLandline)
research.data = read.csv("../data/UA_ResearchData.csv", header=TRUE, sep = ",")
head(research.data)
split(research.data, research.data$isLandline)
x split(research.data, research.data$isLandline)
x=split(research.data, research.data$isLandline)
x[[1]]
x$FALSE
x$"FALSE"
isLandline.data = split(research.data, research.data$isLandline)
isLandline.data[[0]]
isLandline.data$"FALSE"
landline.data = isLandline.data$"TRUE"
landline.data
rm(func)
?aggregate
athena.data = read.csv("../data/UA_AthenaData.csv", header = TRUE, sep = ",")
# 6 minute timeframe
# cut off at 0.99% (any # with calls >11 is a spam (cellphone), and >12 for landline)
research.data = read.csv("../data/UA_ResearchData.csv", header=TRUE, sep = ",")
isLandline.data = split(research.data, research.data$isLandline)
cellphone.data = isLandline.data$"FALSE"
landline.data = isLandline.data$"TRUE"
CPcount = aggregate(cellphone.data$call_time ~ cellphone.data$LineNumber, cellphone.data, FUN = "length")
LLcount = aggregate(landline.data$call_time ~ landline.data$LineNumber, landline.data, FUN = "length")
CPcount$`cellphone.data$call_time` > 11
CPanomaly = CPcount$`cellphone.data$call_time` > 11
CPanomaly
CPanomaly = [CPcount$`cellphone.data$call_time` > 11]
CPanomaly = CPcount[CPcount$`cellphone.data$call_time` > 11]
CPcount$`cellphone.data$call_time`
CPanomaly = CPcount[CPcount$`cellphone.data$call_time` > 11]
CPanomaly = CPcount[CPcount$`cellphone.data$call_time` > 11,]
CPanomaly
LLanomaly = LLcount[LLcount$`landline.data$call_time` > 12,]
?merge
head(athena.data)
head(CPanomaly)
CPathena = merge(athena.data, CPanomaly, by.x = athena.data$LineNumber, by.y = CPanomaly$`cellphone.data$LineNumber`)
CPathena = merge(athena.data, CPanomaly, by.x = "LineNumber", by.y = "cellphone.data$LineNumber")
CPathena
length(CPanomaly)
dim(CPanomaly)
dim(CPathena)
x <- data.frame(k1 = c(NA,NA,3,4,5), k2 = c(1,NA,NA,4,5), data = 1:5)
y <- data.frame(k1 = c(NA,2,NA,4,5), k2 = c(NA,NA,3,4,5), data = 1:5)
y <- data.frame(k3 = c(NA,2,NA,4,5), k2 = c(NA,NA,3,4,5), data = 1:5)
merge(x, y, by.x = "k1", by.y = "k3")
x
y
CPathena[CPanomaly$`cellphone.data$LineNumber`,]
x = CPathena[CPanomaly$`cellphone.data$LineNumber`,]
dim(x)
dim(CPanomaly)
CPathena = athena.data[CPanomaly$`cellphone.data$LineNumber`,]
dim(CPathena)
CPathena = athena.data[CPanomaly$`cellphone.data$LineNumber`,]
LLathena = athena.data[LLanomaly$`landline.data$LineNumber`,]
?write.csv
write.csv(CPathena, file = "./data/cellphone_athena_anomaly.csv", row.names = F, sep = ",")
write.csv(CPathena, file = "cellphone_athena_anomaly.csv", row.names = F, sep = ",")
write.csv(CPathena, file = "cellphone_athena_anomaly.csv", row.names = F)
write.csv(LLathena, file = "landline_athena_anomaly.csv", row.names = F)
PCA.transformed = read.csv("../data/PCA_trans.csv", header=TRUE, sep = ",")
hist(PCA.transformed)
PCA.transformed
hist(PCA.transformed$values)
hist(PCA.transformed$values, freq=F)
min(PCA.transformed$values)
max(PCA.transformed$values)
PCA.transformed$values > 1
count(PCA.transformed$values > 1)
sum(PCA.transformed > 1)
CPathena$Total_BToday_AvgDuration
x = log(CPathena$Total_BToday_AvgDuration)
hist(x)
hist(x, freq = F)
hist(x, freq = T)
hist(x, freq = F)
x = log(CPathena$Total_BToday_AvgDuration + 0.00001)
hist(x)
x = log(CPathena$Total_BToday_AvgDuration + 0.000000001)
hist(x, freq = F)
x
iqr
IQR(x)
boxplot(x)
y = CPathena$Total_BToday_AvgDuration
sum(y > 100)
sum(y > 10000)
sum(y > 1000)
hist(x)
sum(x < 0)
hist(x, breaks = 50)
IQR(x)
hist(x, breaks = 100)
max(x)
sum(x > 10)
which(x > 10)
eps = 0.000001
avg.callduration.transform = log(CPathena$Total_BToday_AvgDuration + eps)
outlier.avgcalldur = which(avg.callduration.transform > 10)
CPathena = CPathena[-c(outlier.avgcalldur)]
x = log(CPathena$Total_BToday_AvgDuration + eps)
hist(x)
hist(x, freq = F, breaks = 100)
sum(x > 10)
max(x)
max(CPathena$Total_BToday_AvgDuration)
CPathena = athena.data[CPanomaly$`cellphone.data$LineNumber`,]
LLathena = athena.data[LLanomaly$`landline.data$LineNumber`,]
dim(CPathena)
eps = 0.000001
avg.callduration.transform = log(CPathena$Total_BToday_AvgDuration + eps)
outlier.avgcalldur = which(avg.callduration.transform > 10)
CPathena = CPathena[-c(outlier.avgcalldur)]
dim(CPathena)
CPathena = athena.data[CPanomaly$`cellphone.data$LineNumber`,]
LLathena = athena.data[LLanomaly$`landline.data$LineNumber`,]
eps = 0.000001
avg.callduration.transform = log(CPathena$Total_BToday_AvgDuration + eps)
outlier.avgcalldur = which(avg.callduration.transform > 10)
CPathena = CPathena[-c(outlier.avgcalldur),]
dim(CPathena)
x = log(CPathena$Total_BToday_AvgDuration + eps)
hist(x, freq = F, breaks = 100)
hist(x, freq = F, breaks = 20)
write.csv(CPathena, file = "cellphone_athena_anomaly_trim.csv", row.names = F)
n30daycalls.transform = log(CPathena$Total_N30Day_Calls + eps)
x = n30daycalls.transform
hist(x, freq = F, breaks = 30)
hist(CPathena$Total_N30Day_Calls)
max(CPathena$Total_N30Day_Calls)
min(CPathena$Total_N30Day_Calls)
hist(x)
?quantile
quantile(CPathena$Total_N30Day_Calls, c(0.8, 0.9))
sum(CPathena$Total_N30Day_Calls < 30)
sum(CPathena$Total_N30Day_Calls < 1)
sum(CPathena$Total_N30Day_Calls < 10)
sum(CPathena$Total_N30Day_Calls > 3000)
hist(CPathena$Total_N30Day_Calls, freq = F, breaks = 40)
hist(x, freq = F, breaks = 50)
max(x)
sum(x > 10)
sum(x < 0)
sum(CPathena$Total_N30Day_Calls < 1)
which(x < 0)
x = x[-c(1378, 2454, 4375)]
hist(x, freq = F, breaks = 50)
sum(x > 10)
x > 17
z = x
z[which(x>10)]
sum(z > 11)
which(z > 11)
CPathena$Total_N30Day_Calls[which(z > 11)]
max(CPathena$Total_N30Day_Calls)
CPathena$Total_N30Day_Calls[which(n30daycalls.transform > 11)]
CPathena$Total_N30Day_Calls[which(n30daycalls.transform > 10)]
outlier.30daycalls = c(which(n30daycalls.transform > 11), which(n30daycalls.transform < 0))
outlier.30daycalls
which(n30daycalls.transform > 11)
CPathena = athena.data[CPanomaly$`cellphone.data$LineNumber`,]
LLathena = athena.data[LLanomaly$`landline.data$LineNumber`,]
write.csv(CPathena, file = "cellphone_athena_anomaly.csv", row.names = F)
write.csv(LLathena, file = "landline_athena_anomaly.csv", row.names = F)
eps = 0.000001
avg.callduration.transform = log(CPathena$Total_BToday_AvgDuration + eps)
outlier.avgcalldur = which(avg.callduration.transform > 10)
CPathena = CPathena[-c(outlier.avgcalldur),]
n30daycalls.transform = log(CPathena$Total_N30Day_Calls + eps)
outlier.30daycalls = c(which(n30daycalls.transform > 11), which(n30daycalls.transform < 0))
CPathena = CPathena[-c(outlier.30daycalls),]
write.csv(CPathena, file = "cellphone_athena_anomaly_trim.csv", row.names = F)
colnames(CPathena)
test = CPathena[,-c("LineNumber", "CallCategory")]
test = CPathena[,-c(CPathena$LineNumber, CPathena$CallCategory)]
colnames(test)
test1 = CPathena[,-c(CPathena$LineNumber, CPathena$CallCategory)]
colnames(test1)
test1 = subset(CPathena, select = c("LineNumber", "CallCategory"))
colnames(test1)
test1 = subset(CPathena, select = -c("LineNumber", "CallCategory"))
test1 = CPathena[, -c(1,2)]
colnames(test1)
test1 = log(test1 + eps)
test
test1
write.csv(test1, file = "test_transform.csv", row.names = F)
